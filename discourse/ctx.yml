## vars ###

{% set var_main_dir = 'discourse' %}
{% set var_containers = params.main.containers | default([]) %}

{% set var_templates_files = [
  'web.template.build.yml',
  'web.template.run.yml',
  'web.template.validate.yml',
  'web.template.yml'
] %}

### main ###

files:

{% for item in var_templates_files %}

- src: "{{ var_main_dir }}/files/templates/{{ item }}"
  dest: "{{ var_main_dir }}/repo/templates/{{ item }}"
  root: true

{% endfor %}

templates:

{% for item in var_containers %}

- src: "{{ var_main_dir }}/templates/containers/{{ item.name_src }}"
  dest: "{{ var_main_dir }}/repo/containers/{{ item.name_dest }}"
  root: true
  params: {{ item.params | to_json }}

{% endfor %}
